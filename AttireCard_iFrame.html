<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Attire Card (Flip with Back-Only QR Link)</title>
<style>
  :root{
    --ar: 0.628;               /* 153.45 / 244.33 */
    --tilt: -5deg;             /* slight rotation */
    --lift: 8px;               /* hover lift distance */
    --flip-duration: 700ms;    /* flip timing */
    --hover-duration: 360ms;   /* hover timing (slower) */
    --ease-out: cubic-bezier(.22,1,.36,1); /* easeOutCubic */
  }
  html, body {
    height: 100%;
    margin: 0;
    background: transparent;
    display: grid;
    place-items: center;
    overflow: hidden;
  }
  .fit { width: 100%; height: 100%; display: grid; place-items: center; }
  .tilt { transform: rotate(var(--tilt)); transform-style: preserve-3d; }

  .card {
    aspect-ratio: var(--ar);
    width: 100%;
    height: auto;
    max-height: 100%;
    max-width: min(100%, calc(100% * var(--ar)));
    position: relative;
    transform-style: preserve-3d;
    transition:
      transform var(--flip-duration) cubic-bezier(.2,.7,.2,1),
      translate var(--hover-duration) var(--ease-out),
      filter var(--hover-duration) var(--ease-out);
    cursor: pointer;
  }
  .card:hover { translate: 0 calc(-1 * var(--lift)); }
  .card.is-back { transform: rotateY(180deg); }

  .face { position: absolute; inset: 0; display: grid; place-items: center; backface-visibility: hidden; overflow: visible; }
  .face img {
    width: 100%; height: 100%; object-fit: contain; display: block;
    filter: drop-shadow(0 8px 18px rgba(0,0,0,.25));
    transition: filter var(--hover-duration) var(--ease-out);
  }
  .card:hover .face img { filter: drop-shadow(0 14px 28px rgba(0,0,0,.28)); }
  .back { transform: rotateY(180deg); }

  /* Eyeballed QR hotspot coordinates */
  .qr-link {
    position: absolute;
    left: 12%;
    top: 8.5%;
    width: 76%;
    height: 36%;
    pointer-events: none;
    z-index: 3;
    /* outline: 2px dashed rgba(0,0,0,.25); */
  }
  .card.is-back .qr-link { pointer-events: auto; }
</style>
</head>
<body>
  <div class="fit">
    <div class="tilt">
      <div class="card" id="flipCard" role="button" aria-pressed="false" tabindex="0">
        <div class="face front" aria-hidden="false">
          <img id="frontImg" alt="Attire card front" />
        </div>
        <div class="face back" aria-hidden="true">
          <img id="backImg" alt="Attire card back with QR code" />
          <a id="qrLink" class="qr-link" href="https://nfxdetroit.org/" target="_blank" rel="noopener" aria-label="Open linked page from QR"></a>
        </div>
      </div>
    </div>
  </div>

<script>
  (function () {
    const card = document.getElementById('flipCard');
    const qrLink = document.getElementById('qrLink');
    const frontFace = card.querySelector('.front');
    const backFace  = card.querySelector('.back');
    const frontImg  = document.getElementById('frontImg');
    const backImg   = document.getElementById('backImg');

    // Use RAW URLs + cache-buster to avoid stale/blocked caches inside Genially
    const bust = 'v=' + Date.now();
    const FRONT_SRC = 'https://raw.githubusercontent.com/mpawlusiak/benefitXIII/refs/heads/main/AttireCard_Front.png?' + bust;
    const BACK_SRC  = 'https://raw.githubusercontent.com/mpawlusiak/benefitXIII/refs/heads/main/AttireCard_Back.png?'  + bust;

    function lazyLoad(imgEl, src) {
      const tmp = new Image();
      tmp.onload  = () => { imgEl.src = src; };
      tmp.onerror = () => { imgEl.src = src; }; // still attempt to set; helpful for transient CORS hiccups
      tmp.referrerPolicy = 'no-referrer';
      tmp.src = src;
    }
    lazyLoad(frontImg, FRONT_SRC);
    lazyLoad(backImg,  BACK_SRC);

    function updateBackState() {
      const isBack = card.classList.contains('is-back');
      card.setAttribute('aria-pressed', String(isBack));
      frontFace.setAttribute('aria-hidden', String(isBack));
      backFace.setAttribute('aria-hidden', String(!isBack));
    }
    updateBackState();

    card.addEventListener('click', (e) => {
      if (e.target === qrLink || qrLink.contains(e.target)) return;
      card.classList.toggle('is-back');
      updateBackState();
    });

    card.addEventListener('keydown', (e) => {
      const k = e.key || e.code;
      if (k === ' ' || k === 'Spacebar' || k === 'Enter') {
        e.preventDefault();
        card.classList.toggle('is-back');
        updateBackState();
      }
    });

    qrLink.addEventListener('click', (e) => e.stopPropagation());
  })();
</script>
</body>
</html>
